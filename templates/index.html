<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TikTok SmartCut Editor</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

<div class="container">

    <header>
        <h1>TikTok SmartCut Studio</h1>
        <p class="subtitle">AI-powered hotel/travel TikTok editor • S3 + LLM + FFmpeg</p>
    </header>


    <!-- UPLOAD SECTION -->
    <div class="card">
        <h2>1. Upload Raw Clips (to S3)</h2>
        <input id="uploadInput" type="file" multiple accept="video/*">
        <button class="btn" onclick="uploadFiles()">Upload to S3</button>
        <div id="uploadStatus" class="status"></div>
    </div>


    <!-- ANALYZE -->
    <div class="card">
        <h2>2. Analyze Clips</h2>
        <button class="btn" onclick="startAnalysis()">Start Analysis</button>
        <button class="btn small" onclick="stepAnalysis()">▶ Step</button>
        <div id="analyzeStatus" class="status"></div>

        <h3>Analysis Cache:</h3>
        <div id="analysisCache" class="list-box"></div>
    </div>


    <!-- YAML GENERATION -->
    <div class="card">
        <h2>3. Generate YAML Storyboard</h2>
        <button class="btn" onclick="generateYaml()">Generate YAML</button>
        <button class="btn small" onclick="reloadConfig()">Reload Current Config</button>
        <textarea id="yamlBox" class="yaml-editor"></textarea>
        <button class="btn green" onclick="saveYaml()">Save YAML</button>
        <div id="yamlStatus" class="status"></div>
    </div>


    <!-- CAPTION EDITOR -->
    <div class="card">
        <h2>4. Edit Captions (Manual or AI)</h2>
        <textarea id="captionInput" class="yaml-editor" style="height:130px;" placeholder="Paste comma-separated captions or a block of text..."></textarea>
        <button class="btn" onclick="saveCaptions()">Apply Captions</button>

        <h3>Overlay Styles:</h3>
        <div>
            <button class="btn small" onclick="applyOverlay('travel_blog')">Travel Blog</button>
            <button class="btn small" onclick="applyOverlay('cinematic')">Cinematic</button>
            <button class="btn small" onclick="applyOverlay('punchy')">Punchy</button>
            <button class="btn small" onclick="applyOverlay('influencer')">Influencer</button>
            <button class="btn small" onclick="applyOverlay('descriptive')">Descriptive</button>
        </div>
        <div id="captionStatus" class="status"></div>
    </div>


    <!-- TIMINGS -->
    <div class="card">
        <h2>5. Smart Timings</h2>
        <button class="btn" onclick="applyTimings(false)">Standard</button>
        <button class="btn small" onclick="applyTimings(true)">Cinematic</button>
        <div id="timingStatus" class="status"></div>
    </div>


    <!-- TTS & CTA -->
    <div class="card">
        <h2>6. TTS / CTA Settings</h2>

        <div class="toggle">
            <input id="ttsToggle" type="checkbox">
            <label for="ttsToggle">Enable TTS</label>
        </div>

        <select id="ttsVoice" class="btn small">
            <option value="alloy">Alloy</option>
            <option value="verse">Verse</option>
            <option value="nova">Nova</option>
            <option value="aria">Aria</option>
        </select>
        <button class="btn small" onclick="setTTS()">Save TTS</button>

        <hr/>

        <div class="toggle">
            <input id="ctaToggle" type="checkbox">
            <label for="ctaToggle">Enable CTA</label>
        </div>

        <input id="ctaText" class="chat-input" placeholder="CTA text...">
        <div class="toggle">
            <input id="ctaVoiceToggle" type="checkbox">
            <label for="ctaVoiceToggle">CTA Voiceover</label>
        </div>
        <button class="btn small" onclick="setCTA()">Save CTA</button>

        <div id="ctaStatus" class="status"></div>
    </div>


    <!-- FG SCALE -->
    <div class="card">
        <h2>7. Clip FG Scale</h2>
        <input type="range" id="fgScale" min="0.5" max="2.0" step="0.1" value="1.0">
        <button class="btn small" onclick="updateFGScale()">Apply Scale</button>
        <div id="fgStatus" class="status"></div>
    </div>


    <!-- EXPORT -->
    <div class="card">
        <h2>8. Export Final Video</h2>

        <div class="toggle">
            <input id="optimizedExport" type="checkbox">
            <label for="optimizedExport">Optimized Export</label>
        </div>

        <button class="btn green big" onclick="exportVideo()">Export</button>
        <div id="exportStatus" class="status"></div>
    </div>


    <!-- CHAT ASSISTANT -->
    <div class="card">
        <h2>9. AI Chat Assistant</h2>
        <input id="chatMessage" class="chat-input" placeholder="Ask anything...">
        <button class="btn small" onclick="sendChat()">Send</button>
        <div id="chatResponse" class="mini-output"></div>
    </div>


    <!-- LIVE LOG -->
    <div class="card">
        <h2>Live Status Log</h2>
        <div id="liveLog" class="log-box"></div>
    </div>

</div>

<script src="/static/js/app.js"></script>

</body>
</html>
